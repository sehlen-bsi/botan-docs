title: Minor Additions to the API or Cryptographic Features

description: |
  The changes in this section are mostly self-contained additions or
  improvements of cryptographic algorithms that cannot be associated with a
  larger feature development. Nevertheless, they are relevant to the security of
  the library, in contrast to the changes in :ref:`changes/code_chores`.

patches:
# Remove build-time configuration of mlock limit  (@randombit)
- pr: 3405  # https://github.com/randombit/botan/pull/3405
  merge_commit: 8dd4e756bb7e05f2fa5aed0e4f18467619a30a74
  classification: info
  auditer: FAlbertDev

# Added secure_vector<T>::lock  (@oviano)
- pr: 3431  # https://github.com/randombit/botan/pull/3431
  merge_commit: 2cb7acb3e0f87356907d79775a07a64122d2d396
  classification: info
  auditer: FAlbertDev

# Add StreamCipher::buffer_size  (@randombit)
- pr: 3404  # https://github.com/randombit/botan/pull/3404
  merge_commit: 9c7ee1781a01842f7f1f7d9224b1f032f570c1d5
  classification: info
  auditer: FAlbertDev

# Add support for XTS short nonces  (@randombit)
- pr: 3336  # https://github.com/randombit/botan/pull/3336
  merge_commit: 30f2f49cdddc28c30c64ed2df664bd57d556d413
  classification: relevant
  auditer: FAlbertDev

# Add SymmetricAlgorithm::has_keying_material  (@randombit)
- pr: 3295  # https://github.com/randombit/botan/pull/3295
  merge_commit: ded1a8c7e0a496e6aca194d852fc92602193ab8d
  classification: info
  auditer: FAlbertDev
  comment: |
    Add a method SymmetricAlgorithm::has_keying_material to check if
    an object stores key material. Also some small refactoring.

# Add a hash truncation wrapper (eg. `Truncated(SHA-256,192)`)  (@reneme)
- pr: 3284  # https://github.com/randombit/botan/pull/3284
  merge_commit: c166d6e396a0d8ff5c1373d1e47f3fee6b7f8e69
  classification: relevant

# Implement write_keystream for CTR and SHAKE  (@randombit)
- pr: 3189  # https://github.com/randombit/botan/pull/3189
  merge_commit: f1ec760f312ec53bfdb39c802abb38ee8d24a98b
  classification: relevant
  comment: |
    Implement write_keystream for CTR and SHAKE

# Add Cipher_Mode::requires_entire_message  (@randombit)
- pr: 3172  # https://github.com/randombit/botan/pull/3172
  merge_commit: d955da28f7a2dae5178df3e1d3962940e275fee7
  classification: info
  auditer: FAlbertDev
  comment: |
    Add an informational method Cipher_Mode::requires_entire_message
    indicating if the cipher mode can process the message
    consecutively or requires the full message.

# Add Cipher_Mode::ideal_granularity  (@randombit)
- pr: 3168  # https://github.com/randombit/botan/pull/3168
  merge_commit: b783fa16e3ffaacff596e0be04f7dc4ae05326cf
  classification: info
  auditer: FAlbertDev
  comment: |
    Add a method Cipher_Mode::ideal_granularity to tell the optimal
    minimal update size for the respective mode considering the performance.
    Also includes some documentation and error log fixes and updates.

# Follow up: Sanity check for Shake_Cipher base class  (@reneme)
- pr: 3170  # https://github.com/randombit/botan/pull/3170
  merge_commit: 0e215cde490d9ec134a13d32011b6c4387aebda1
  classification: relevant
  comment: |
    Follow up to GH #3167: Sanity check for Shake_Cipher base class

# Stream cipher facade for SHAKE-256  (@reneme)
- pr: 3167  # https://github.com/randombit/botan/pull/3167
  merge_commit: f16dc8a58b035e733871caf1b537686a548f618f
  classification: relevant

# new util to name the data pages for now linux and especially android (part 2)  (@devnexen)
- commit: fa120ca3ad5dd6b3bee9750418fd9dd21380f647  # https://github.com/randombit/botan/commit/fa120ca3ad5dd6b3bee9750418fd9dd21380f647
  classification: info
  auditer: FAlbertDev
  comment: |
    This is a manual (second) merge of GH #2944 due to a user error. Further
    details can be found here: https://github.com/randombit/botan/pull/2953

# new util to name the data pages for now linux and especially android  (@devnexen)
- pr: 2944  # https://github.com/randombit/botan/pull/2944
  merge_commit: 1fa8bdefad6dcff17eb5a1f074ccb23a2b22ffa8
  classification: info
  auditer: FAlbertDev
  comment: |
    This was merged before in fa120ca3ad5dd6b3bee9750418fd9dd21380f647 but
    Jack forgot to pull before merging locally. Resulting in an inconsistent state.
    See here: https://github.com/randombit/botan/pull/2953

# Add vpternlogd based Serpent sboxes  (@randombit)
- pr: 3536  # https://github.com/randombit/botan/pull/3536
  merge_commit: 8b3dff8896c9f157c86c7469702acd1519e7752a
  classification: out of scope
  auditer: FAlbertDev

# Add env var to clear CPUID bits  (@randombit)
- pr: 3535  # https://github.com/randombit/botan/pull/3535
  merge_commit: 2f7d5296eb045169ec9de1d712cde050c2e3336d
  classification: info
  auditer: FAlbertDev

# Add CT::all_zeros  (@randombit)
- pr: 3522  # https://github.com/randombit/botan/pull/3522
  merge_commit: cd6afda867fc0d9c97edbaa1fd3814272ee1fbed
  classification: relevant
  auditer: FAlbertDev
  comment: |
    Add a constant time check that checks if all elements
    of a container are zero
