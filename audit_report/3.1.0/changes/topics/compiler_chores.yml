title: Compiler Workarounds and Compile-Flag Adaptions

description: |
  Changes that work around compiler issues, improve the CPU feature detection or
  modify CPU/ISA specific implementations and workarounds.

patches:
# Disable MSVC warnings about inheritance via dominance  (@oviano)
- pr: 3462  # https://github.com/randombit/botan/pull/3462
  merge_commit: 7293032815a4a74ec900ffe55ea518be0c099038
  classification: info
  auditer: reneme

# Add BOTAN_COMPILER_HAS_ATTRIBUTE  (@randombit)
- pr: 3471  # https://github.com/randombit/botan/pull/3471
  merge_commit: 70d06e46455735fdbbb51e4d641382e34647dc84
  classification: info

# Work around an XCode 14.3 miscompilation affecting ARIA key schedule  (@randombit)
- pr: 3492  # https://github.com/randombit/botan/pull/3492
  merge_commit: 1b1596720abe8870833daeb595dfc8eb57cfbca5
  classification: out of scope
  auditer: reneme

# GCC 13 pre-release fix proposal  (@devnexen)
- pr: 3435  # https://github.com/randombit/botan/pull/3435
  merge_commit: f808e3b72ca40df5878dcc84daba066bb74b40b3
  classification: info
  auditer: reneme

# Remove code no longer relevant now that our minimum Clang is 14  (@randombit)
- pr: 3175  # https://github.com/randombit/botan/pull/3175
  merge_commit: 7df696a9fbcefaf7ac9cf43edea15bbeddd21d8c
  classification: info

# Add BOTAN_COMPILER_HAS_BUILTIN  (@randombit)
- pr: 3174  # https://github.com/randombit/botan/pull/3174
  merge_commit: b3a94912196beb837b4901709266a500ec28e369
  classification: info
  auditer: reneme

# FIX/Update: Apple Clang version map  (@reneme)
- pr: 3155  # https://github.com/randombit/botan/pull/3155
  merge_commit: 84e662b740650302a9bc194367220167155f38af
  classification: info

# Various fixes to avoid GCC 12 bugs which affect C++20 compliation  (@randombit)
- pr: 3083  # https://github.com/randombit/botan/pull/3083
  merge_commit: ee0b58e0a77ecb94c2ee95c1e366f0eee09f657a
  classification: info
  auditer: reneme

# Add support for Clang ivdep pragma  (@Jack Lloyd)
- commit: d32764416febba8d245619307aaaeee50c0d53d0  # https://github.com/randombit/botan/commit/d32764416febba8d245619307aaaeee50c0d53d0
  classification: info
  auditer: reneme

# Revert use of Clang ivdep pragma  (@Jack Lloyd)
- commit: 720d06b711b24187ec643771f92b234b99bbbf37  # https://github.com/randombit/botan/commit/720d06b711b24187ec643771f92b234b99bbbf37
  classification: info
  auditer: reneme

# Bump DEFAULT_BUFFER_SIZE to 4096  (@Jack Lloyd)
- commit: 48cb874c3a3afebed55daff3412b6a6a96ee20a3  # https://github.com/randombit/botan/commit/48cb874c3a3afebed55daff3412b6a6a96ee20a3
  classification: info
  auditer: reneme

# Fix a warning from Clang [ci skip]  (@Jack Lloyd)
- commit: 77cd355b0bf6c19fb4586188879e9af74d5c81c9  # https://github.com/randombit/botan/commit/77cd355b0bf6c19fb4586188879e9af74d5c81c9
  classification: info
  auditer: reneme

# Add BOTAN_AVX2_FN annotation macro  (@Jack Lloyd)
- commit: 7b6e17c2d65ca3868d235ef8ecdbf74d493c7179  # https://github.com/randombit/botan/commit/7b6e17c2d65ca3868d235ef8ecdbf74d493c7179
  classification: info
  auditer: reneme

# Disable argon2_ssse3 on MSVC  (@Jack Lloyd)
- commit: e37989c5402747f2d1eb26eb6217a40bfe23307f  # https://github.com/randombit/botan/commit/e37989c5402747f2d1eb26eb6217a40bfe23307f
  classification: info
  auditer: reneme

# Use init_priority attribute on the pool allocator  (@randombit)
- pr: 3481  # https://github.com/randombit/botan/pull/3481
  merge_commit: 9647e4fd354e243720719fda180642a46e6e8b6f
  classification: info
  auditer: reneme

# Fixed bcrypt WinRT build  (@oviano)
- pr: 3428  # https://github.com/randombit/botan/pull/3428
  merge_commit: f4c3a6527848fe01d739ff5f9aabf4ec25319e41
  classification: info
  auditer: reneme

# Fix mul128.h to support MSVC ARM64 target  (@nursik)
- pr: 3000  # https://github.com/randombit/botan/pull/3000
  merge_commit: 0dd5c5b7b606f0682658b32470434a4ef2f6d184
  classification: info
  auditer: reneme

# Offer a proper array prefetch function, refactor CPUID, and remove cache line size detection  (@randombit)
- pr: 3391  # https://github.com/randombit/botan/pull/3391
  merge_commit: d6ba34e8287ec60c0fc0476d3fc2aad198085d93
  classification: info
  auditer: reneme
  comment: |
    Contains significant changes to side channel countermeasures in ARIA,
    Camellia and SEED block ciphers. None of which is in scope for this review.
    Therefore this is purely informational.

# Improve CPUID support for AVX-512  (@randombit)
- pr: 3166  # https://github.com/randombit/botan/pull/3166
  merge_commit: feb75cc49739dbec2fb5435c861d3422f29b5fa8
  classification: info
  auditer: reneme

# Remove explicit BMI1 support from CPUID  (@Jack Lloyd)
- commit: a52d5e332618e844af84ad4f79ebf5bc848cac9c  # https://github.com/randombit/botan/commit/a52d5e332618e844af84ad4f79ebf5bc848cac9c
  classification: info
  auditer: reneme

# Silence warning when no CPUID bits exist  (@Jack Lloyd)
- commit: 892988da346683484b9c68113a6bed14bf370157  # https://github.com/randombit/botan/commit/892988da346683484b9c68113a6bed14bf370157
  classification: info
  auditer: reneme

# Remove the Threefish-512 AVX2 implementation  (@randombit)
- pr: 3299  # https://github.com/randombit/botan/pull/3299
  merge_commit: 9574cb123588157f3d0a507bfec70f8cdc51308a
  classification: out of scope
  auditer: reneme

# Fix ppc64 build  (@Jack Lloyd)
- commit: 9069dfa680e3179d437e4c0f15980bf850545647  # https://github.com/randombit/botan/commit/9069dfa680e3179d437e4c0f15980bf850545647
  classification: info
  auditer: reneme

# Small cleanups for the mul128.h header  (@randombit)
- pr: 3534  # https://github.com/randombit/botan/pull/3534
  merge_commit: 8a8dec9bbac2bd8179a2842fae9a90747ee5e7cc
  classification: info
  auditer: FAlbertDev

# Remove compiler restriction for SM4 module  (@Jack Lloyd)
- commit: 057bcbc35bd06937c6173ab4cecfe1953dedc4b8  # https://github.com/randombit/botan/commit/057bcbc35bd06937c6173ab4cecfe1953dedc4b8
  classification: info
  auditer: FAlbertDev

# Limit the Serpent AVX512 code to GCC or Clang  (@Jack Lloyd)
- commit: a76f7ea4d14470a0b651c3cd6e9f8158f2e7499d  # https://github.com/randombit/botan/commit/a76f7ea4d14470a0b651c3cd6e9f8158f2e7499d
  classification: info
  auditer: FAlbertDev
