title: Code Cleanups and Chores

description: |
  These cleanups and code style improvements do not affect the security of the
  library. With one exception (GH #3291) that performs a refactoring at the
  internal workings of SHA-2 and AES. No changes that might alter the behaviour
  of the library were identified.

patches:
# Use std::string_view and fmt more extensively  (@randombit)
- pr: 3480  # https://github.com/randombit/botan/pull/3480
  classification: info
  auditer: reneme

# Fixed a couple of unused argument warnings in minimized build  (@oviano)
- pr: 3463  # https://github.com/randombit/botan/pull/3463
  classification: info

# Various clang-tidy fixes  (@randombit)
- pr: 3456  # https://github.com/randombit/botan/pull/3456
  classification: info

# Remove various public member variables  (@randombit)
- pr: 3454  # https://github.com/randombit/botan/pull/3454
  classification: info
  auditer: reneme

# Use span for the argument to lock  (@randombit)
- pr: 3442  # https://github.com/randombit/botan/pull/3442
  classification: info

# Add a simple formatting helper  (@randombit)
- pr: 3440  # https://github.com/randombit/botan/pull/3440
  classification: info

# Adopt std::string_view in various APIs  (@randombit)
- pr: 3432  # https://github.com/randombit/botan/pull/3432
  classification: info

# FIxed sqlite3 forward declarations to use struct not class  (@oviano)
- pr: 3427  # https://github.com/randombit/botan/pull/3427
  classification: info

# Rename the BSI X.509 test data to use shorter names  (@randombit)
- pr: 3423  # https://github.com/randombit/botan/pull/3423
  classification: info
  auditer: reneme

# Remove #if 0 disabled code  (@randombit)
- pr: 3419  # https://github.com/randombit/botan/pull/3419
  classification: info
  auditer: reneme

# Use std::span instead of vector references to pass key bits to public keys  (@randombit)
- pr: 3418  # https://github.com/randombit/botan/pull/3418
  classification: info
  auditer: reneme

# Fix some clang-tidy warnings  (@randombit)
- pr: 3410  # https://github.com/randombit/botan/pull/3410
  classification: info
  auditer: reneme

# Chore: AEAD_Mode can deal with generic containers  (@reneme)
- pr: 3317  # https://github.com/randombit/botan/pull/3317
  classification: info

# std::span for Stream_Cipher  (@reneme)
- pr: 3395  # https://github.com/randombit/botan/pull/3395
  classification: info

# Chore: Iterate the Buffered_Computation API  (@reneme)
- pr: 3396  # https://github.com/randombit/botan/pull/3396
  classification: info

# std::span for MessageAuthenticationCode  (@reneme)
- pr: 3397  # https://github.com/randombit/botan/pull/3397
  classification: info

# std::span for Key Derivation Function  (@reneme)
- pr: 3398  # https://github.com/randombit/botan/pull/3398
  classification: info

# std::span, std::string_view for base32, base58  (@reneme)
- pr: 3399  # https://github.com/randombit/botan/pull/3399
  classification: info

# std::span for Public Key Operations  (@reneme)
- pr: 3400  # https://github.com/randombit/botan/pull/3400
  classification: info

# std::span for Botan::BlockCipher  (@reneme)
- pr: 3394  # https://github.com/randombit/botan/pull/3394
  classification: info

# Chore: Symmetric_Algorithm can deal with generic containers  (@reneme)
- pr: 3297  # https://github.com/randombit/botan/pull/3297
  classification: info

# Chore: Buffered_Computation can deal with generic containers  (@reneme)
- pr: 3294  # https://github.com/randombit/botan/pull/3294
  classification: info

# FIX: Remove const from std::span parameter  (@reneme)
- pr: 3378  # https://github.com/randombit/botan/pull/3378
  classification: info

# Further unique_ptr cleanups  (@randombit)
- pr: 3359  # https://github.com/randombit/botan/pull/3359
  classification: info
  auditer: reneme

# Some unique_ptr related cleanups  (@randombit)
- pr: 3357  # https://github.com/randombit/botan/pull/3357
  classification: info
  auditer: reneme

# Fix some recent pylint warnings  (@randombit)
- pr: 3354  # https://github.com/randombit/botan/pull/3354
  classification: info
  auditer: reneme

# Remove secure_vector from EMSA API  (@randombit)
- pr: 3352  # https://github.com/randombit/botan/pull/3352
  classification: info
  auditer: reneme

# std::span/std::string_view for base64 codec  (@reneme)
- pr: 3350  # https://github.com/randombit/botan/pull/3350
  classification: info

# std::span/std::string_view for hex_encode/decode  (@reneme)
- pr: 3349  # https://github.com/randombit/botan/pull/3349
  classification: info

# Fix clang-tidy warnings in recently introduced code  (@randombit)
- pr: 3323  # https://github.com/randombit/botan/pull/3323
  classification: info

# Replace EC_Point::Compression_Type with EC_Point_Format enum  (@randombit)
- pr: 3310  # https://github.com/randombit/botan/pull/3310
  classification: info
  auditer: reneme

# Some misc ASN1_Time improvements/cleanups  (@randombit)
- pr: 3306  # https://github.com/randombit/botan/pull/3306
  classification: info
  auditer: reneme

# Avoid some ineffcient string concatenations  (@randombit)
- pr: 3305  # https://github.com/randombit/botan/pull/3305
  classification: info
  auditer: reneme

# Yet more various clang-tidy fixes  (@randombit)
- pr: 3298  # https://github.com/randombit/botan/pull/3298
  classification: info
  auditer: reneme

# Fix a false positive from clang-tidy in the PKCS11 tests  (@randombit)
- pr: 3293  # https://github.com/randombit/botan/pull/3293
  classification: info
  auditer: reneme

# More clang-tidy warning fixes  (@randombit)
- pr: 3289  # https://github.com/randombit/botan/pull/3289
  classification: info
  auditer: reneme

# Further clang-tidy warning fixes  (@randombit)
- pr: 3288  # https://github.com/randombit/botan/pull/3288
  classification: info
  auditer: reneme

# Update clang-tidy config and fix many warnings  (@randombit)
- pr: 3286  # https://github.com/randombit/botan/pull/3286
  classification: info
  auditer: reneme

# [std::span] X509:: and PKCS8:: load_key(std::span)  (@reneme)
- pr: 3203  # https://github.com/randombit/botan/pull/3203
  classification: info

# few `typedef` -> `using` changes and adding constraints  (@devnexen)
- pr: 3253  # https://github.com/randombit/botan/pull/3253
  classification: info
  auditer: reneme

# CamelCase the CRL_Code enum  (@randombit)
- pr: 3245  # https://github.com/randombit/botan/pull/3245
  classification: info

# Make Cipher_Dir an enum class  (@randombit)
- pr: 3242  # https://github.com/randombit/botan/pull/3242
  classification: info
  auditer: reneme

# More raw pointer cleanups  (@randombit)
- pr: 3229  # https://github.com/randombit/botan/pull/3229
  classification: info

# Add back the old Signature_Format values (as deprecated)  (@randombit)
- pr: 3230  # https://github.com/randombit/botan/pull/3230
  classification: info

# Make Key_Constraints an "enum class"-like class  (@randombit)
- pr: 3225  # https://github.com/randombit/botan/pull/3225
  classification: info

# Remove various uses of raw pointers in the public API  (@randombit)
- pr: 3220  # https://github.com/randombit/botan/pull/3220
  classification: info

# starting to remove handmade thread facilities in favor of their C++20…  (@devnexen)
- pr: 3158  # https://github.com/randombit/botan/pull/3158
  classification: info

# Annotate a few classes that should be final  (@randombit)
- pr: 3173  # https://github.com/randombit/botan/pull/3173
  classification: info
  auditer: reneme

# Introduce a strong-type template  (@reneme)
- pr: 3165  # https://github.com/randombit/botan/pull/3165
  classification: info

# Rename PointGFp to EC_Point  (@randombit)
- pr: 3152  # https://github.com/randombit/botan/pull/3152
  classification: info

# following up change to c++20 level, introducing constinit  (@devnexen)
- pr: 3114  # https://github.com/randombit/botan/pull/3114
  classification: info
  auditer: reneme

# one step further towards C++20, while __builtin_expect is GNU compile…  (@devnexen)
- pr: 3115  # https://github.com/randombit/botan/pull/3115
  classification: info
  auditer: reneme

# Remove redundant use of `Botan::` prefix when already in that namespace  (@randombit)
- pr: 3103  # https://github.com/randombit/botan/pull/3103
  classification: info
  auditer: reneme

# Remove uses of ';;' to terminate statements.  (@randombit)
- pr: 3102  # https://github.com/randombit/botan/pull/3102
  classification: info
  auditer: reneme

# Fix more Pylint warnings  (@randombit)
- pr: 3093  # https://github.com/randombit/botan/pull/3093
  classification: info
  auditer: reneme

# Fix various Pylint warnings  (@randombit)
- pr: 3091  # https://github.com/randombit/botan/pull/3091
  classification: info
  auditer: reneme

# Convert Signature_Format to an enum class  (@randombit)
- pr: 3084  # https://github.com/randombit/botan/pull/3084
  classification: info

# Sunset Python 2 support  (@reneme)
- pr: 3046  # https://github.com/randombit/botan/pull/3046
  classification: info

# Improve performance/usability of STL util `concat`  (@reneme)
- pr: 3052  # https://github.com/randombit/botan/pull/3052
  classification: info

# Remove deprecated OCSP-related Certificate Status Codes  (@reneme)
- pr: 3050  # https://github.com/randombit/botan/pull/3050
  classification: info

# Nit: remove std::optional<> where it is not needed  (@reneme)
- pr: 3047  # https://github.com/randombit/botan/pull/3047
  classification: info

# FIX: compiler warning uint64_t -> uint32_t  (@reneme)
- pr: 3016  # https://github.com/randombit/botan/pull/3016
  classification: info

# FIX: Array Parameter Warnings  (@reneme)
- pr: 3015  # https://github.com/randombit/botan/pull/3015
  classification: info

# Fixed more -Wredundant-tags warnings  (@jankoerner)
- pr: 2929  # https://github.com/randombit/botan/pull/2929
  classification: info
  auditer: reneme

# Fixed -Wredundant-tags Warnings  (@jankoerner)
- pr: 2928  # https://github.com/randombit/botan/pull/2928
  classification: info
  auditer: reneme

# Fix some clang-tidy warnings  (@Jack Lloyd)
- commit: 747a54592234a15ffc86c108edb692cd3b59b1d3  # https://github.com/randombit/botan/commit/747a54592234a15ffc86c108edb692cd3b59b1d3
  classification: info
  auditer: reneme

# Improve error message if the PKCS11 RSA decrypt test fails  (@Jack Lloyd)
- commit: 13aabae3119961400f213be1891f0b415443f4d8  # https://github.com/randombit/botan/commit/13aabae3119961400f213be1891f0b415443f4d8
  classification: info
  auditer: reneme

# Ignore clang-tidy warning in test [ci skip]  (@Jack Lloyd)
- commit: 0bc1657b080be12666a3aeb3bc48573cc992440b  # https://github.com/randombit/botan/commit/0bc1657b080be12666a3aeb3bc48573cc992440b
  classification: info
  auditer: reneme

# Revert "Use span for the argument to lock"  (@Jack Lloyd)
- commit: 02b25fc1e84bfa33dcef4a1c63ad124d017e7bf7  # https://github.com/randombit/botan/commit/02b25fc1e84bfa33dcef4a1c63ad124d017e7bf7
  classification: info
  auditer: reneme

# Silence deprecation warnings in the test  (@Jack Lloyd)
- commit: 2b6139e0224cd072afc424620a0e05b57f9436f2  # https://github.com/randombit/botan/commit/2b6139e0224cd072afc424620a0e05b57f9436f2
  classification: info
  auditer: reneme

# Silence deprecation warning  (@Jack Lloyd)
- commit: fef1c699c1da4d44ec57c8fb7f7d818fd97ae3ed  # https://github.com/randombit/botan/commit/fef1c699c1da4d44ec57c8fb7f7d818fd97ae3ed
  classification: info
  auditer: reneme

# Deprecate cryptobox module  (@Jack Lloyd)
- commit: 05b3b02b117770cd14a54321fd7223495f3e51bc  # https://github.com/randombit/botan/commit/05b3b02b117770cd14a54321fd7223495f3e51bc
  classification: out of scope
  auditer: reneme

# Deprecate pbkdf.h  (@Jack Lloyd)
- commit: d5efbb4c79c9c85adab73ada26b00b2cb7bcd6e3  # https://github.com/randombit/botan/commit/d5efbb4c79c9c85adab73ada26b00b2cb7bcd6e3
  classification: info
  auditer: reneme

# Remove debug printf  (@Jack Lloyd)
- commit: 55aaa5149c5d4cda52f14093db2c770dcc4da6d9  # https://github.com/randombit/botan/commit/55aaa5149c5d4cda52f14093db2c770dcc4da6d9
  classification: info
  auditer: reneme

# Fix unused variable warning  (@Jack Lloyd)
- commit: f0746663564a13f28892910d97dc1c49d47c93ae  # https://github.com/randombit/botan/commit/f0746663564a13f28892910d97dc1c49d47c93ae
  classification: info
  auditer: reneme

# Clean up factory methods a bit  (@Jack Lloyd)
- commit: 2a2d3a1df14eb02db316f6866187fe675ac58051  # https://github.com/randombit/botan/commit/2a2d3a1df14eb02db316f6866187fe675ac58051
  classification: info
  auditer: reneme

# Fix some clang-tidy warnings  (@Jack Lloyd)
- commit: 01e67a5980e53de7e5c752f7eb25107abf3c84ee  # https://github.com/randombit/botan/commit/01e67a5980e53de7e5c752f7eb25107abf3c84ee
  classification: info
  auditer: reneme

# Fix some clang-tidy warnings  (@Jack Lloyd)
- commit: d6d74f9fd0118ff659eaa8e02779592accc1dba9  # https://github.com/randombit/botan/commit/d6d74f9fd0118ff659eaa8e02779592accc1dba9
  classification: info
  auditer: reneme

# Add missing final annotation to PSS_Params  (@Jack Lloyd)
- commit: f5a3ba994b51e9357eb19e40f04f8eb3755a042b  # https://github.com/randombit/botan/commit/f5a3ba994b51e9357eb19e40f04f8eb3755a042b
  classification: info
  auditer: reneme

# Remove unncessary includes of oids.h  (@Jack Lloyd)
- commit: ff1d94663530eb5c6484735cde7bc0157ea67202  # https://github.com/randombit/botan/commit/ff1d94663530eb5c6484735cde7bc0157ea67202
  classification: info
  auditer: reneme

# Fix clang-tidy macro usage warning  (@Jack Lloyd)
- commit: 5cf62af943d9a8511b13ed9a6e3ce4114c9abf9c  # https://github.com/randombit/botan/commit/5cf62af943d9a8511b13ed9a6e3ce4114c9abf9c
  classification: info
  auditer: reneme

# Remove two checks from the clang-tidy ignore list  (@Jack Lloyd)
- commit: 41e2905c0fa1373ea453025d4b8f37d8921dacfe  # https://github.com/randombit/botan/commit/41e2905c0fa1373ea453025d4b8f37d8921dacfe
  classification: out of scope
  auditer: reneme

# Fix some container size() > 0 checks to use empty instead  (@Jack Lloyd)
- commit: 998d74e27fd02cd4377484a3ba0c61847e974716  # https://github.com/randombit/botan/commit/998d74e27fd02cd4377484a3ba0c61847e974716
  classification: info
  auditer: reneme

# Bump amalgamation copyright header [ci skip]  (@Jack Lloyd)
- commit: f3a957da59487f05432a1d13b52e109d978c4eea  # https://github.com/randombit/botan/commit/f3a957da59487f05432a1d13b52e109d978c4eea
  classification: info
  auditer: reneme

# Tweak shake_cipher.h header guard [ci skip]  (@Jack Lloyd)
- commit: 3fceec42e6d002cd767ce5101cf9fe618d4b9c78  # https://github.com/randombit/botan/commit/3fceec42e6d002cd767ce5101cf9fe618d4b9c78
  classification: info
  auditer: reneme

# Fix compile and update comment  (@Jack Lloyd)
- commit: cf283e4cc81916f4002ac12a5d5960b098b03840  # https://github.com/randombit/botan/commit/cf283e4cc81916f4002ac12a5d5960b098b03840
  classification: info
  auditer: reneme

# Fix compilation  (@Jack Lloyd)
- commit: 4ced99be8cb1cb3949229d369984fe7cae7b2b48  # https://github.com/randombit/botan/commit/4ced99be8cb1cb3949229d369984fe7cae7b2b48
  classification: info
  auditer: reneme

# Remove pointless preprocessor guards  (@Jack Lloyd)
- commit: e2a0c273a865d07c1552f800cf8e01854ce24acf  # https://github.com/randombit/botan/commit/e2a0c273a865d07c1552f800cf8e01854ce24acf
  classification: info
  auditer: reneme

# Remove public named constants for SM3 params  (@Jack Lloyd)
- commit: 7f745f2bbb0ca78b7f491d338dbad5e8ba2e90df  # https://github.com/randombit/botan/commit/7f745f2bbb0ca78b7f491d338dbad5e8ba2e90df
  classification: out of scope
  auditer: reneme

# Formatting nit  (@Jack Lloyd)
- commit: 4f715e863fbc464a5a73d483a0ba4ee47c8cb7dd  # https://github.com/randombit/botan/commit/4f715e863fbc464a5a73d483a0ba4ee47c8cb7dd
  classification: info
  auditer: reneme

# Indentation fixes  (@Jack Lloyd)
- commit: 15de63fe0c92e4b895d182cb1b1fb105ea5de769  # https://github.com/randombit/botan/commit/15de63fe0c92e4b895d182cb1b1fb105ea5de769
  classification: info
  auditer: reneme

# Move name to within #ifdef block  (@Jack Lloyd)
- commit: 225cc9a1cbb9b2add45872257909c177ff97a80f  # https://github.com/randombit/botan/commit/225cc9a1cbb9b2add45872257909c177ff97a80f
  classification: info
  auditer: reneme

# Remove needless include  (@Jack Lloyd)
- commit: b8997eeeae3df8b3e6c73b7337682c8db4fae2e3  # https://github.com/randombit/botan/commit/b8997eeeae3df8b3e6c73b7337682c8db4fae2e3
  classification: info
  auditer: reneme

# Use CamelCase for ECIES_Flags enumeration  (@randombit)
- pr: 3309  # https://github.com/randombit/botan/pull/3309
  classification: info
  auditer: reneme

# Remove various function-like macros  (@randombit)
- pr: 3291  # https://github.com/randombit/botan/pull/3291
  classification: relevant
  auditer: reneme
  comment: |
    This refactors some low-level implementation details in AES-NI, SHA-2 and
    some other (out-of-scope) algorithms. Namely replacing preprocessor macros
    with inline functions or template functions. The actual implementation stays
    the same.

# Remove unused member since 3bedb5f3cb94ecc5607572b404c4a324f7acc2a7  (@nunojpg)
- pr: 3278  # https://github.com/randombit/botan/pull/3278
  classification: info
  auditer: reneme

# Remove some unnecessary typedefs  (@randombit)
- pr: 3267  # https://github.com/randombit/botan/pull/3267
  classification: info

# concat, addressing todo.  (@devnexen)
- pr: 3251  # https://github.com/randombit/botan/pull/3251
  classification: info

# few little todos  (@devnexen)
- pr: 3226  # https://github.com/randombit/botan/pull/3226
  classification: info

# Revert GH #3158 adopting std::counting_semaphore  (@randombit)
- pr: 3207  # https://github.com/randombit/botan/pull/3207
  classification: info
  auditer: reneme

# Small cleanups for polyn_gf2m type  (@randombit)
- pr: 3082  # https://github.com/randombit/botan/pull/3082
  classification: info

# rotate helpers converts to constraints.  (@devnexen)
- pr: 3252  # https://github.com/randombit/botan/pull/3252
  classification: info
  auditer: reneme
