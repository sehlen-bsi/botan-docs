title: Build and Configuration System

description: |
  This mostly tweaks the build system with minor new features useful for
  maintainers of the library. Some patches enable certain functionality that
  influence the libraries security characteristics or change the BSI build
  policy.

patches:
# Remove the configure.py option --with-everything  (@randombit)
- pr: 3433  # https://github.com/randombit/botan/pull/3433
  classification: info
  auditer: reneme

# The Windows library should also include the major version  (@randombit)
- pr: 3231  # https://github.com/randombit/botan/pull/3231
  classification: info
  auditer: reneme

# Drop VC 2019 support  (@randombit)
- pr: 3224  # https://github.com/randombit/botan/pull/3224
  classification: info
  auditer: reneme

# Remove --test-mode  (@randombit)
- pr: 3133  # https://github.com/randombit/botan/pull/3133
  classification: info
  auditer: reneme

# CI: Allow building out-of-source  (@reneme)
- pr: 3077  # https://github.com/randombit/botan/pull/3077
  classification: info

# Use C++20 for Botan 3.0  (@randombit)
- pr: 3086  # https://github.com/randombit/botan/pull/3086
  classification: info
  auditer: reneme

# Bump to Android NDK 25b  (@randombit)
- pr: 3088  # https://github.com/randombit/botan/pull/3088
  classification: info
  auditer: reneme

# Fix out-of-source builds on windows  (@dg0yt)
- pr: 3072  # https://github.com/randombit/botan/pull/3072
  classification: info

# Test: Allow reporting results as JUnit  (@reneme)
- pr: 3028  # https://github.com/randombit/botan/pull/3028
  classification: info

# Handle multiple `src` dirs in source path  (@dg0yt)
- pr: 3069  # https://github.com/randombit/botan/pull/3069
  classification: info

# fix source path of "compiler_include_dirs" with cmake on windows  (@boricm)
- pr: 3060  # https://github.com/randombit/botan/pull/3060
  classification: info

# FIX: emscripten object file suffix is .o  (@reneme)
- pr: 3045  # https://github.com/randombit/botan/pull/3045
  classification: info

# Feature: <module_info> in info.txt files  (@reneme)
- pr: 3032  # https://github.com/randombit/botan/pull/3032
  classification: info

# ./configure.py --terminate-on-asserts  (@reneme)
- pr: 2980  # https://github.com/randombit/botan/pull/2980
  classification: info
  comment: |
    Optionally switching assertions from throwing an exception to hard-aborting
    the program revealed a few minor bugs that were addressed in this pull
    request. In some places the implementation was relying on assertions in
    production code for constraint checks.

# Stop linking against libboost_system / start using -isystem compiler option  (@reneme)
- pr: 3010  # https://github.com/randombit/botan/pull/3010
  classification: info

# Fix distribution of release candidates  (@Jack Lloyd)
- commit: 2db85727e8c9f19745298c2a4c5320986a47fbfe  # https://github.com/randombit/botan/commit/2db85727e8c9f19745298c2a4c5320986a47fbfe
  classification: out of scope
  auditer: reneme

# Tidy up OS feature flags  (@Jack Lloyd)
- commit: fd3303f6baa4245fd1e6b66934806c32bafbde74  # https://github.com/randombit/botan/commit/fd3303f6baa4245fd1e6b66934806c32bafbde74
  classification: relevant
  auditer: reneme
  comment: |
    System call ``getrandom()`` is now available on FreeBSD.

# Add support for explicit_bzero on Linux  (@Jack Lloyd)
- commit: e6819a380fb67c1be546dc618248b62d93266423  # https://github.com/randombit/botan/commit/e6819a380fb67c1be546dc618248b62d93266423
  classification: relevant
  auditer: reneme
  comment: |
    System call ``explicit_bzero()`` is now used to scrub sensitive memory on
    Linux.

# Remove further obsolete/unused build.h toggles  (@Jack Lloyd)
- commit: 37896ecb6c52a469ab10f0c2068427b80caa0c72  # https://github.com/randombit/botan/commit/37896ecb6c52a469ab10f0c2068427b80caa0c72
  classification: info
  auditer: reneme

# Remove unused build.h toggles  (@Jack Lloyd)
- commit: ab99bb231220c6ca772cfdad333c841ee64d7e26  # https://github.com/randombit/botan/commit/ab99bb231220c6ca772cfdad333c841ee64d7e26
  classification: info
  auditer: reneme

# Fix configure.py when invoked as an absolute path  (@Jack Lloyd)
- commit: 3b15cd6a1d9eb7048807cfa21ab3129b712cc221  # https://github.com/randombit/botan/commit/3b15cd6a1d9eb7048807cfa21ab3129b712cc221
  classification: info
  auditer: reneme

# Allow the user to disable internal modules  (@randombit)
- pr: 3489 # https://github.com/randombit/botan/pull/3489
  classification: info

# Remove support for IncludeOS  (@randombit)
- pr: 3406 # https://github.com/randombit/botan/pull/3406
  classification: info
  auditer: reneme

# src/build-data/arch/superh.txt: add sh4{eb,aeb}  (@ffontaine)
- pr: 3038 # https://github.com/randombit/botan/pull/3038
  classification: info

# Update BSI policy  (@lieser)
- pr: 2998 # https://github.com/randombit/botan/pull/2998
  classification: relevant
  comment: |
    Prohibits ISA-specific implementations of Serpent, SHACAL-2 and SM4. Along
    with "ec_h2c" (hash to curve) and the BLAKE2b message authentication code.

# Add kyber, argon2 to BSI module policy  (@securitykernel)
- pr: 2930 # https://github.com/randombit/botan/pull/2930
  classification: relevant
  comment: |
    Sets Kyber, argon2 (and its dependencies) as required modules.
